<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        // let arr = ['str1','str2',null,true,false,undefined,{name : 'max', age : 15}]
        // console.log(typeof arr)
        // console.log(arr[0])
        // console.log(arr[1])
        // console.log(arr[2])
        // console.log(arr[3])
        // console.log(arr[4])
        // console.log(arr[5])
        // console.log(arr[6])

        // // 배열의 동적 확장
        // arr[7] = 100;
        // console.log(arr);
        // arr[10] = "hello world"
        // console.log(arr[8],arr[9],arr[10])
        // console.log(arr.length)

        // // 배열함수
        // arr.forEach((item)=>{
        //     console.log("item : ", item)
        // });

        // // push - 마지막 index에 요소추가
        // // pop - 마지막 index 제거
        // arr.push('aaa');
        // console.log(arr)

        // arr.pop();
        // arr.pop();
        // console.log(arr)


        // -- sort -- 정렬
        let arr2 = [10, 23, 214, null, 25, '7', 44, 58, null];
        // arr2.sort() //배열의 요소를 문자열로 변환하여 오름차순으로 정렬
        // // object,null은 순서에 따라 정렬
        // arr2.forEach((item) => { console.log(item) });
        // console.log(arr2)

        //내림차순
        arr2.sort((a, b) => { return b - a; });

        // 약식처리
        arr2.forEach(item => console.log(item))

        console.log(arr2)

        // -- filter -- 필터
        let arr3 = [10, 15, 2, null, 30, '12', '75', { name: 'max', age: 15 }, undefined]
        let result1 = arr3.filter((item) => { return typeof item == 'number' })
        // console.log(result1)
        arr3.filter((item) => { typeof item == 'string' })
            .forEach((item) => { console.log(item) })

        // -- reduce -- 합산
        arr4 = [10, 15, 2, null, 30, '12', '75', { name: 'max', age: 15 }, undefined]

        const result2 = arr4.filter((item) => { return typeof item == 'number' })
            .reduce((sum, item) => { return sum + item }, 0)
        console.log(`result : ${result2}`)

        // 배열 object 처리
        arr5 = [
            { pid: '1', pname: '모니터', price: 100, amount: 10 },
            { pid: '2', pname: '노트북', price: 200, amount: 20 },
            { pid: '3', pname: '냉장고', price: 300, amount: 30 },
            { pid: '4', pname: '가습기', price: 400, amount: 40 },
            { pid: '5', pname: '데스크탑', price: 500, amount: 50 },
        ]
        arr5.forEach(item => console.log(item))

        console.log("--------------------------------")

        arr5.forEach((item, index) => console.log(index, item.pname))

        console.log("--------------------------------")

        arr5.filter((item) => { return item.price >= 300 })
            .forEach(item => {
                console.log(`300만원이상`, item)
            });

        console.log("-------------------------------------------")

        arr5.filter(item => item.amount <= 30)
            .forEach(item => console.log(`재고 30개 이하`, item))

        console.log("-------------------------------------------")

        const result3 = arr5.filter(item => item.price >= 300)
            .reduce((sum, item) => { return sum + item.price }, 0)
        console.log('300만원이상 가격총합 : ', result3)

        // -- map -- 재구성
        let arr6 = [
            { pid: '1', pname: '모니터', price: 100, amount: 10 },
            { pid: '2', pname: '노트북', price: 200, amount: 37 },
            { pid: '3', pname: '냉장고', price: 300, amount: 20 },
            { pid: '4', pname: '가습기', price: 400, amount: 2 },
            { pid: '5', pname: '데스크탑', price: 500, amount: 55 },
        ]

        const mapAry = arr6.filter(item => item.amount >= 20)
            .sort((a, b) => { return a.price - b.price })
            .map((item) => {
                console.log('in map : ', item)
                item = {...item, "total_price":item.price*item.amount}
                return item
            })
            console.log(mapAry)

//----------------------------------
        //  문제
        //----------------------------------
        let employees = [
            { id: 1, name: "김철수", age: 35, department: "개발", salary: 6000, years: 10 },
            { id: 2, name: "이영희", age: 28, department: "디자인", salary: 5000, years: 5 },
            { id: 3, name: "박지성", age: 40, department: "마케팅", salary: 7000, years: 15 },
            { id: 4, name: "손흥민", age: 30, department: "개발", salary: 6500, years: 7 },
            { id: 5, name: "정우성", age: 45, department: "경영", salary: 9000, years: 20 },
            { id: 6, name: "한지민", age: 29, department: "디자인", salary: 5200, years: 6 },
            { id: 7, name: "강호동", age: 50, department: "경영", salary: 8500, years: 25 },
            { id: 8, name: "유재석", age: 42, department: "마케팅", salary: 7500, years: 18 },
            { id: 9, name: "송중기", age: 32, department: "개발", salary: 6200, years: 8 },
            { id: 10, name: "수지", age: 26, department: "디자인", salary: 4800, years: 3 }
        ];

        //연봉이(salary) 6000이상이면서 근속연수(years)가 7년이상인 직원만 필터링해서 배열로 저장 확인
        const res1 = employees.filter((item) => {
            return item.salary >= 6000, item.years >= 7
        })
        console.log("result 1 : ", rest1)
        //모든 직원의 연봉(salary) 기준으로 내림차순 정렬한 배열 새로 만들기
        const res2 = employees.sort((a, b) => { return b.salary - a.salary; })
        console.log("result 2 : ", res2)

        //모든 직원의 연봉(salary) 에 근속연수*100 만큼의 보너스를 추가하여 total_salary필드를 추가한 배열을 반환
        const res3 = employees.map((item) => {
            item = { ...item, 'total_salary': item.years * 100 }
            return item
        })
        console.log("result 3 : ", res3)

        //department(부서) 별로 직원들의 연봉총합을 구하세요
        // const dep = employees.filter((item) => {
        //     return item.department == "개발"
        // }).reduce((sum, item) => sum + item.salary, 0)
        // console.log("개발연봉 총합 : ", dep)

        // const design = employees.filter((item) => {
        //     return item.department == "디자인"
        // }).reduce((sum, item) => sum + item.salary, 0)
        // console.log("디자인연봉 총합 : ", design)

        // const mar = employees.filter((item) => {
        //     return item.department == "마케팅"
        // }).reduce((sum, item) => sum + item.salary, 0)
        // console.log("마케팅연봉 총합 : ", mar)

        // const manage = employees.filter((item) => {
        //     return item.department == "경영"
        // }).reduce((sum, item) => sum + item.salary, 0)
        // console.log("경영연봉 총합 : ", manage)

        const res4 = employees.reduce((sum, item) => { 
            sum[item.department] = sum[item.department]==undefined? 0 : sum[item.department]+item.salary
            return sum
        }, {})
        console.log("result 4 : ", res4)

        //연봉(salary)가 가장높은 직원을 찾아 객체하나만 반환(문서에서 find를 찾아보세요 - !)
        const res5 = employees.find((item) => {
            return item.salary
        })
        console.log("result 5 : ", res5)

        
    </script>
</body>

</html>